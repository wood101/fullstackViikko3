(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(42)},40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(15),u=n.n(s),o=n(2),i=n(3),l=n(5),c=n(4),m=n(6),p=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("p",null,"rajaa n\xe4ytett\xe4vi\xe4 ",r.a.createElement("input",{onChange:function(t){return e.props.filter(t.target.value)}}))}}]),t}(a.Component),d=n(7),h=n.n(d),f="/api/persons",v={getAll:function(){return h.a.get(f).then(function(e){return e.data})},create:function(e){return h.a.post(f,e).then(function(e){return e.data})},remove:function(e){return h.a.delete(f+"/"+e).then(function(e){return e.data})},update:function(e,t){return h.a.put("".concat(f,"/").concat(t),e).then(function(e){return e.data})}},b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.addPerson=function(e){e.preventDefault();for(var t=0;t<n.props.persons.length;t++)if(n.props.persons[t].name===n.state.newName){var a=n.props.persons[t];return void(window.confirm(a.name+" on jo luettelossa, korvataanko vanha numero uudella?")&&n.updatePerson(a))}var r={name:n.state.newName,number:n.state.newNumber};v.create(r).then(function(e){n.setState({newName:"",newNumber:""});var t=n.props.persons.concat(e);n.props.newSubmission(t,"Lis\xe4ttiin "+r.name+".",null)})},n.updatePerson=function(e){e.number=n.state.newNumber,v.update(e,e.id).then(function(t){n.setState({newName:"",newNumber:""}),v.getAll().then(function(t){n.props.newSubmission(t,"Henkil\xf6n "+e.name+" numero vaihdettiin onnistuneesti.",null)})}).catch(function(t){var a=n.props.persons.map(function(e){return e.id}).indexOf(e.id),r=n.props.persons;r.splice(a,1),n.props.newSubmission(r,null,"Henkil\xf6n "+e.name+" tiedot on jo poistettu.")})},n.state={newName:"",newNumber:"",error:"",success:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.addPerson},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:this.state.newNumber,onChange:this.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))}}]),t}(a.Component),w=function(e){var t=e.errorMessage,n=e.successMessage;return null===t&&null===n?null:null===t?r.a.createElement("div",{className:"success"},n):null===n?r.a.createElement("div",{className:"error"},t):r.a.createElement("div",null,r.a.createElement("div",{className:"error"},t),r.a.createElement("div",{className:"success"},n))},E=(n(40),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).updateFilter=function(e){n.setState({filter:e})},n.updatePerson=function(e,t,a){n.setState({persons:e}),n.setState({success:t}),n.setState({error:a})},n.handleClickRemoveButton=function(e){if(window.confirm("Poistetaanko "+e.name+"?")){var t=n.state.persons.map(function(e){return e.id}).indexOf(e.id);v.remove(e.id);var a=n.state.persons;a.splice(t,1),n.setState({persons:a})}},n.showNumber=function(e){if(e.name.toLowerCase().includes(n.state.filter.toLowerCase()))return r.a.createElement("div",{key:e.name},r.a.createElement("p",null,e.name," ",e.number,"  ",r.a.createElement("button",{onClick:function(){return n.handleClickRemoveButton(e)}},"poista")," "))},n.state={persons:[],filter:"",gotJson:!1,error:null,success:null},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.getAll().then(function(t){e.setState({persons:t}),e.setState({gotJson:!0})})}},{key:"render",value:function(){var e=this;return this.state.gotJson?r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(w,{errorMessage:this.state.error,successMessage:this.state.success}),r.a.createElement(p,{filter:this.updateFilter}),r.a.createElement("h2",null,"Lis\xe4\xe4 uusi tai muuta olemassa olevan henkil\xf6n numeroa"),r.a.createElement(b,{newSubmission:this.updatePerson,persons:this.state.persons}),r.a.createElement("h2",null,"Numerot"),r.a.createElement("div",null,this.state.persons.map(function(t){return e.showNumber(t)}))):null}}]),t}(r.a.Component));u.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.b5dd14d2.chunk.js.map